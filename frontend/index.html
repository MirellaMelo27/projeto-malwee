<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monitor de Máquinas - Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-dark text-white">

    <nav class="navbar navbar-expand-lg navbar-dark bg-black border-bottom border-secondary">
        <div class="container-fluid">
            <a class="navbar-brand d-flex align-items-center" href="#" onclick="showSection('visao-geral')">
                <i class="bi bi-activity me-2 text-primary"></i> Monitor de Máquinas
            </a>
            <div class="collapse navbar-collapse justify-content-end">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="nav-visao-geral" onclick="showSection('visao-geral')">Visão Geral</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="nav-detalhes" onclick="showSection('detalhes')">Detalhes</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="nav-simulacao" onclick="showSection('simulacao')">Simulação</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid p-4">

        <section id="visao-geral" class="content-section">
            <h2 class="mb-4 text-white">Visão Geral da Produção</h2>
            <p class="text-secondary">Estatísticas agregadas de todas as tarefas</p>

            <div class="row g-4 mb-4">
                <div class="col-md-3">
                    <div class="card p-3 bg-dark-card border-secondary-subtle">
                        <h5>Total de Tarefas <i class="bi bi-box-seam float-end text-primary"></i></h5>
                        <h3 class="text-primary" id="kpi-total-tarefas">1000</h3>
                        <small class="text-secondary">tarefas registradas</small>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card p-3 bg-dark-card border-secondary-subtle">
                        <h5>Total de Metros <i class="bi bi-rulers float-end text-success"></i></h5>
                        <h3 class="text-success" id="kpi-total-metros">1.250 m</h3>
                        <small class="text-secondary">metros produzidos</small>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card p-3 bg-dark-card border-secondary-subtle">
                        <h5>Tarefas Completas <i class="bi bi-check-circle float-end text-info"></i></h5>
                        <h3 class="text-info" id="kpi-tarefas-completas">850</h3>
                        <small class="text-secondary">de 1000 tarefas</small>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card p-3 bg-dark-card border-secondary-subtle">
                        <h5>Total de Tiras <i class="bi bi-scissors float-end text-warning"></i></h5>
                        <h3 class="text-warning" id="kpi-total-tiras">1500</h3>
                        <small class="text-secondary">tiras processadas</small>
                    </div>
                </div>
            </div>

            <div class="row g-4 mb-4">
                <div class="col-md-6">
                    <div class="card p-4 bg-dark-card border-secondary-subtle">
                        <h5 class="card-title">Taxa de Conclusão</h5>
                        <canvas id="completionChart" height="150"></canvas>
                        <div class="mt-3">
                            <ul class="list-unstyled text-secondary small">
                                <li>Tarefas Completas: <strong class="float-end text-info">850</strong></li>
                                <li>Tarefas Incompletas: <strong class="float-end text-danger">150</strong></li>
                                <li class="pt-2 border-top border-secondary mt-2">Taxa de Conclusão: <strong class="float-end text-white">85.0%</strong></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card p-4 bg-dark-card border-secondary-subtle">
                        <h5 class="card-title">Produtividade Semanal (Metros)</h5>
                        <canvas id="productivityChart" height="250"></canvas>
                    </div>
                </div>
            </div>

            <div class="text-center mt-3">
                <button class="btn btn-primary btn-lg" onclick="showSection('detalhes')">
                    Ver Todas as Tarefas <i class="bi bi-arrow-right"></i>
                </button>
            </div>
        </section>

        <section id="detalhes" class="content-section" style="display:none;">
            <h2 class="mb-4 text-white">Detalhes das Tarefas</h2>
            <p class="text-secondary">Clique em uma tarefa para ver todas as informações</p>

            <div class="input-group mb-3">
                <input type="text" class="form-control bg-dark text-white border-secondary" placeholder="Buscar por tarefa, tecido, data..." aria-label="Buscar" id="search-input">
                <button class="btn btn-outline-secondary text-white border-secondary" type="button"><i class="bi bi-search"></i></button>
            </div>

            <div class="card bg-dark-card border-secondary-subtle p-3">
                <h5 class="text-white mb-3">Todas as Tarefas (<span id="total-tarefas-detalhes">1000</span>)</h5>
                
                <div class="table-responsive">
                    <table class="table table-dark table-hover table-borderless task-table" id="task-table">
                        <thead>
                            <tr class="text-secondary">
                                <th style="width: 20px;"></th>
                                <th onclick="sortTable(1)">Data</th>
                                <th onclick="sortTable(2)">Tarefa</th>
                                <th onclick="sortTable(3)">Tecido</th>
                                <th onclick="sortTable(4)">Metros</th>
                                <th onclick="sortTable(5)">Tiras</th>
                                <th onclick="sortTable(6)">Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            </tbody>
                    </table>
                </div>

                <div class="d-flex justify-content-between align-items-center mt-3">
                    <small class="text-secondary" id="pagination-info">Mostrando 1 a 20 de 1000 tarefas</small>
                    <nav>
                        <ul class="pagination pagination-sm mb-0">
                            <li class="page-item disabled"><a class="page-link bg-dark text-white border-secondary" href="#"><i class="bi bi-chevron-bar-left"></i></a></li>
                            <li class="page-item active"><a class="page-link bg-primary border-primary" href="#">1</a></li>
                            <li class="page-item"><a class="page-link bg-dark text-white border-secondary" href="#">2</a></li>
                            <li class="page-item"><a class="page-link bg-dark text-white border-secondary" href="#">3</a></li>
                            <li class="page-item"><a class="page-link bg-dark text-white border-secondary" href="#">4</a></li>
                            <li class="page-item"><a class="page-link bg-dark text-white border-secondary" href="#">5</a></li>
                            <li class="page-item"><a class="page-link bg-dark text-white border-secondary" href="#"><i class="bi bi-chevron-bar-right"></i></a></li>
                        </ul>
                    </nav>
                </div>

            </div>
        </section>

        <section id="simulacao" class="content-section" style="display:none;">
            <button class="btn btn-link text-white ps-0" onclick="showSection('visao-geral')"><i class="bi bi-arrow-left me-2"></i> Voltar</button>
            <h2 class="mb-4 text-white">Simulação de Máquina</h2>
            <p class="text-secondary">Simule o funcionamento da máquina em tempo real</p>

            <div class="row g-4">
                <div class="col-md-4">
                    <div class="card p-3 bg-dark-card border-secondary-subtle">
                        <h5>Status da Máquina</h5>
                        <p class="mb-0 fs-5"><i class="bi bi-circle-fill me-2" id="sim-status-dot" style="color: red;"></i> <span id="sim-status-text">Parada</span></p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card p-3 bg-dark-card border-secondary-subtle">
                        <h5>Metros Produzidos</h5>
                        <h3 class="mb-0"><span id="sim-metros-produzidos">0.0</span> / <span id="sim-metros-alvo">500</span>m</h3>
                        <div class="progress mt-2" style="height: 5px;">
                            <div class="progress-bar bg-success" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" id="sim-metros-progress"></div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card p-3 bg-dark-card border-secondary-subtle">
                        <h5>Quantidade de Tiras</h5>
                        <h3 class="mb-0"><span id="sim-tiras-produzidas">0</span> / <span id="sim-tiras-alvo">25</span></h3>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="card p-4 bg-dark-card border-secondary-subtle">
                        <h5 class="card-title mb-3">Controles</h5>
                        <div class="d-flex mb-3">
                            <button class="btn btn-primary me-2" id="sim-iniciar"><i class="bi bi-play-fill"></i> Iniciar</button>
                            <button class="btn btn-secondary" id="sim-resetar"><i class="bi bi-arrow-counterclockwise"></i> Resetar</button>
                        </div>
                        <label for="sim-velocidade" class="form-label mt-3">Velocidade da Máquina: <strong id="sim-velocidade-value">100%</strong></label>
                        <input type="range" class="form-range" id="sim-velocidade" min="10" max="200" value="100">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card p-4 bg-dark-card border-secondary-subtle">
                        <h5 class="card-title mb-3">Informações da Tarefa</h5>
                        <ul class="list-unstyled mb-0">
                            <li>Número da Tarefa: <strong class="float-end text-info" id="sim-tarefa-num">SIM-001</strong></li>
                            <li>Tipo de Tecido: <strong class="float-end" id="sim-tecido">Algodão Premium</strong></li>
                            <li>Tipo de Saída: <strong class="float-end" id="sim-saida">Rolo</strong></li>
                            <li>Tempo de Setup: <strong class="float-end" id="sim-tempo-setup">0:00</strong></li>
                            <li>Tempo de Produção: <strong class="float-end" id="sim-tempo-producao">0:00</strong></li>
                            <li>Tarefa Completa: <strong class="float-end text-danger" id="sim-tarefa-completa">Não</strong></li>
                        </ul>
                    </div>
                </div>

                <div class="col-12">
                    <div class="card p-4 bg-dark-card border-secondary-subtle">
                        <h5 class="card-title mb-3">Progresso da Produção</h5>
                        <canvas id="simulacaoChart" height="100"></canvas>
                        <div class="mt-3">
                            Metros: <strong class="float-end" id="sim-progresso-metros">0.0%</strong>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
</body>
</html>